@{
    ViewData["Title"] = "Add";
}

<h1>Add</h1>
<form id="frmStudents" method="post" class="form-horizontal">
    <h1>Tag helper approach</h1>
    <hr />

    <div class="form-group">
        <label for="name" class="col-md-2 control-label">Name</label>
        <div class="col-md-10">
            <input id="txtName" class="form-control" />
            <span class="text-danger"></span>
        </div>
    </div>
    <div class="form-group">
        <label for="email" class="col-md-2 control-label">Email</label>
        <div class="col-md-10">
            <input id="txtEmail" class="form-control" />
            <span class="text-danger"></span>
        </div>
    </div>
    <div class="form-group">
        <label for="phone" class="col-md-2 control-label">Phone</label>
        <div class="col-md-10">
            <input id="txtPhone" class="form-control" />
            <span class="text-danger"></span>
        </div>
    </div>
    @*<div class="form-group">
        <label class="col-md-2 control-label">Department Name</label>*@
    @*<div class="col-md-10">
            <select class="form-control" asp-for="DepartmentId" asp-items="@(new SelectList(ViewBag.Departments,"Id","Name"))">
                <option>--Select--</option>
            </select>
            <span asp-validation-for="Address" class="text-danger"></span>
        </div>*@
    @*</div>*@
    <div class="form-group">
        <div class="col-md-10">
            <input id="btnSave" type="submit" class="btn btn-success" value="Save" />
        </div>
    </div>
</form>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
       
        $('#btnSave').click(function (e) {
            e.preventDefault();

            var studentModel = {
                Name: $('#txtName').val(),
                Email: $('#txtEmail').val(),
                PhoneNo: $('#txtPhone').val()
            }
            $.ajax({
                type: 'POST',
                url: 'https://localhost:44325/api/students',    
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(studentModel),
                success: function (studentModel) {
                    location.href = '/students/getall';
                },
                error: function (error) {
                   alert("error")
                },
            })
            
        })
    
    })
</script>
